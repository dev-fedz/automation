<!-- Scenario Comments Modal -->
<div class="automation-modal" data-role="scenario-comments-modal" hidden>
    <div class="automation-modal__backdrop" data-action="close-scenario-comments-modal"></div>
    <div class="automation-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="scenario-comments-modal-title" style="max-width: 800px;">
        <header class="automation-modal__header">
            <h2 id="scenario-comments-modal-title">Comments</h2>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button type="button" class="btn-icon" id="add-comment-btn" title="Add Comment" aria-label="Add Comment">
                    <span style="font-size: 18px;">âž•</span>
                </button>
                <button type="button" class="automation-modal__close" data-action="close-scenario-comments-modal" aria-label="Close">&times;</button>
            </div>
        </header>
        <div class="automation-modal__body" style="max-height: 600px; overflow-y: auto;">
            <input
                type="file"
                id="scenario-comments-attachments-input"
                name="scenario_comment_attachments"
                multiple
                hidden
                accept="image/*,video/*,.csv,.xls,.xlsx,.pdf,.doc,.docx"
            >
            <!-- Add comment form (shown at top when clicking + button) -->
            <form id="add-comment-form" class="automation-form" style="display: none; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 2px solid #e1e4e8;">
                <input type="hidden" id="comment-scenario-id" name="scenario">
                <div class="form-row">
                    <label for="comment-content">Add Comment</label>
                    <textarea id="comment-content" name="content" rows="8" placeholder="Write your comment here..." class="tinymce-editor"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Post Comment</button>
                    <button type="button" class="btn-secondary" id="cancel-add-comment">Cancel</button>
                </div>
            </form>

            <div id="comments-list">
                <!-- Comments will be loaded here -->
            </div>

            <!-- Inline editor for edit/reply (will be inserted dynamically) -->
            <div id="inline-comment-editor" style="display: none; margin-top: 15px; padding: 15px; background: #f6f8fa; border: 1px solid #e1e4e8; border-radius: 6px;">
                <form id="inline-comment-form" class="automation-form">
                    <input type="hidden" id="inline-comment-scenario-id" name="scenario">
                    <div class="form-row">
                        <label for="inline-comment-content"><span id="inline-editor-label">Edit Comment</span></label>
                        <textarea id="inline-comment-content" name="content" rows="6" placeholder="Write your comment here..." class="tinymce-editor"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="inline-submit-btn">Save</button>
                        <button type="button" class="btn-secondary" id="cancel-inline-comment">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
