<!-- Add Scenario modal (used for adding a scenario directly to a module) -->
<div class="automation-modal" data-role="module-add-scenario-modal" hidden>
    <div class="automation-modal__backdrop" data-action="close-module-add-scenario-modal"></div>
    <div class="automation-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="module-add-scenario-modal-title">
        <header class="automation-modal__header">
            <h2 id="module-add-scenario-modal-title">Add Scenario to Module</h2>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button type="button" class="btn-icon" id="module-view-scenario-comments-btn" data-action="open-scenario-comments-modal" title="Comments" aria-label="Comments" hidden>
                    <span style="font-size: 18px;">ðŸ’¬</span>
                </button>
                <button type="button" class="automation-modal__close" data-action="close-module-add-scenario-modal" aria-label="Close">&times;</button>
            </div>
        </header>
        <form id="module-add-scenario-form" class="automation-form" autocomplete="off">
            <fieldset>
                <legend class="sr-only">New scenario</legend>
                <input type="hidden" id="module-add-scenario-module-id" name="module">
                <div class="form-row">
                    <label for="module-add-scenario-title">Title<span aria-hidden="true">*</span></label>
                    <input type="text" id="module-add-scenario-title" name="title" required maxlength="150" placeholder="Scenario title">
                </div>
                <div class="form-row">
                    <label for="module-add-scenario-description">Description</label>
                    <textarea id="module-add-scenario-description" name="description" rows="12" placeholder="Short summary"></textarea>
                </div>
                <div class="form-actions" id="module-view-scenario-save-row" hidden>
                    <button type="button" class="btn-primary" data-action="submit-view-scenario-save">Save Scenario</button>
                    <button type="button" class="btn-secondary" data-action="cancel-view-scenario-edit">Cancel</button>
                </div>

                <div class="form-row" id="module-view-scenario-comments-row" hidden style="height: 1000px; display: flex; flex-direction: column;">
                    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom: 8px;">
                        <span style="font-weight: 600;">COMMENTS</span>
                        <button type="button" class="btn-primary" data-action="toggle-view-scenario-add-comment">Add Comment</button>
                    </div>
                    <input
                        type="file"
                        id="module-view-scenario-comment-attachments-input"
                        name="scenario_comment_attachments"
                        multiple
                        hidden
                        accept="image/*,video/*,.csv,.xls,.xlsx,.pdf,.doc,.docx"
                    >
                    <div id="module-view-scenario-add-comment-form" class="automation-form" style="display:none; margin-bottom: 12px;">
                        <input type="hidden" id="module-view-scenario-comment-scenario-id" name="scenario">
                        <div class="form-row">
                            <textarea id="module-view-scenario-comment-content" name="content" rows="6" placeholder="Write your comment here..." class="tinymce-editor"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-primary" data-action="post-view-scenario-add-comment">Post Comment</button>
                            <button type="button" class="btn-secondary" data-action="cancel-view-scenario-add-comment">Cancel</button>
                        </div>
                    </div>
                    <div id="module-view-scenario-comments" style="flex: 1 1 auto; overflow-y: auto;"></div>
                </div>
                <div class="form-row dependency-toggle">
                    <label class="dependency-toggle__label" for="module-add-scenario-is-automated">
                        <input type="checkbox" id="module-add-scenario-is-automated" name="is_automated" checked>
                        <span>Automated scenario (included in RUN)</span>
                    </label>
                </div>
            </fieldset>
            <div class="form-actions">
                <button type="submit" class="btn-primary">Save Scenario</button>
                <button type="button" class="btn-secondary" data-action="close-module-add-scenario-modal">Cancel</button>
            </div>
        </form>
    </div>
</div>
